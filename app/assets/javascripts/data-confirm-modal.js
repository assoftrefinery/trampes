!function(a){var e,t={title:"Confirmar acció",commit:"Confirmar",commitClass:"btn-danger",cancel:"Cancel·lar",cancelClass:"btn-default",fade:!0,verifyClass:"form-control",elements:["a[data-confirm]","button[data-confirm]","input[type=submit][data-confirm]"],focus:"commit",zIndex:1050,modalClass:!1,show:!0};window.dataConfirmModal={setDefaults:function(t){e=a.extend(e,t)},restoreDefaults:function(){e=a.extend({},t)},confirm:function(a){var e=i(a);e.spawn(),e.on("hidden.bs.modal",function(){e.remove()}),e.find(".commit").on("click",function(){a.onConfirm&&a.onConfirm.call&&a.onConfirm.call(),e.modal("hide")}),e.find(".cancel").on("click",function(){a.onCancel&&a.onCancel.call&&a.onCancel.call(),e.modal("hide")})}},dataConfirmModal.restoreDefaults();var n=function(a){var e={title:a.attr("title")||a.data("original-title"),text:a.data("confirm"),focus:a.data("focus"),method:a.data("method"),commit:a.data("commit"),commitClass:a.data("commit-class"),cancel:a.data("cancel"),cancelClass:a.data("cancel-class"),remote:a.data("remote"),verify:a.data("verify"),verifyRegexp:a.data("verify-regexp"),verifyLabel:a.data("verify-text"),verifyRegexpCaseInsensitive:a.data("verify-regexp-caseinsensitive"),backdrop:a.data("backdrop"),keyboard:a.data("keyboard"),show:a.data("show")},t=i(e);return t.find(".commit").on("click",function(){a.get(0).click(),t.modal("hide")}),t},i=function(t){var n="confirm-modal-"+(Math.random()+"").slice(2,-1),i=e.fade?"fade":"",o=e.modalClass?e.modalClass:"",d=a('<div id="'+n+'" class="modal '+i+" "+o+'" tabindex="-1" role="dialog" aria-labelledby="'+n+'Label" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 id="'+n+'Label" class="modal-title"></h4> </div><div class="modal-body"></div><div class="modal-footer"><button class="btn cancel" data-dismiss="modal" aria-hidden="true"></button><button class="btn commit"></button></div></div></div></div>'),c=current=e.zIndex;a(".modal.in").not("#"+n).each(function(){current=parseInt(a(this).css("z-index"),10),current>c&&(c=current)}),d.css("z-index",parseInt(c)+1),d.find(".modal-title").text(t.title||e.title);var l=d.find(".modal-body");a.each((t.text||"").split(/\n{2}/),function(e,t){l.append(a("<p/>").html(t))});var s=d.find(".commit");s.text(t.commit||e.commit),s.addClass(t.commitClass||e.commitClass);var r=d.find(".cancel");if(r.text(t.cancel||e.cancel),r.addClass(t.cancelClass||e.cancelClass),t.remote&&s.attr("data-dismiss","modal"),t.verify||t.verifyRegexp){s.prop("disabled",!0);var m;if(t.verifyRegexp){var f=t.verifyRegexpCaseInsensitive,u=t.verifyRegexp,v=RegExp(u,f?"i":"");m=function(a){return a.match(v)}}else m=function(a){return t.verify==a};var p=a("<input/>",{type:"text","class":e.verifyClass}).on("keyup",function(){s.prop("disabled",!m(a(this).val()))});d.on("shown.bs.modal",function(){p.focus()}),d.on("hidden.bs.modal",function(){p.val("").trigger("keyup")}),t.verifyLabel&&l.append(a("<p>",{text:t.verifyLabel})),l.append(p)}var b;return b=t.focus?t.focus:"delete"==t.method?"cancel":e.focus,b=d.find("."+b),d.on("shown.bs.modal",function(){b.focus()}),a("body").append(d),d.spawn=function(){return d.modal({backdrop:t.backdrop,keyboard:t.keyboard,show:t.show})},d},o=function(a){var e=a.data("confirm-modal");return e||(e=n(a),a.data("confirm-modal",e)),e};if(a.fn.confirmModal=function(){var e=o(a(this));return e.spawn(),e},a.rails){var d=a.rails.confirm;a(document).delegate(e.elements.join(", "),"confirm",function(){var e=a(this),t=o(e);return t.is(":visible")?(a.rails.confirm=function(){return!0},t.one("hidden.bs.modal",function(){a.rails.confirm=d}),!0):(t.spawn(),!1)})}}(jQuery);